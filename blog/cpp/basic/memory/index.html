<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8" /> <title> [C++] 분할구현과 메모리 -MoonSeok Choi </title> <meta http-equip="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="description" content="분할구현과 메모리- [C++] 분할구현과 메모리"> <meta name="keywords" content="[C++] 분할구현과 메모리, MoonSeok Choi, cpp,cpp, basic, variable, memory"/> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" /> <meta content="" property="fb:app_id" /> <meta content="MoonSeok Choi" property="og:site_name" /> <meta content="[C++] 분할구현과 메모리" property="og:title" /> <meta content="article" property="og:type" /> <meta content="분할구현과 메모리" property="og:description" /> <meta content="/blog/cpp/basic/memory/" property="og:url" /> <meta content="2021-05-13T03:35:23+00:00" property="article:published_time" /> <meta content="/about/" property="article:author" /> <meta content="/assets/img/posts/bitoper.PNG" property="og:image" /> <meta content="cpp" property="article:section" /> <!-- Twitter Cards --> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:title" content="[C++] 분할구현과 메모리" /> <meta name="twitter:url" content="/blog/cpp/basic/memory/" /> <meta name="twitter:description" content="분할구현과 메모리" /> <link rel="stylesheet" href="/assets/css/main.css" /> <!-- <link rel="stylesheet" href="/assets/css/custom-style.css" /> --> <link rel="stylesheet" href="/assets/bower_components/lightgallery/dist/css/lightgallery.min.css" /> <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" /> <link rel="stylesheet" href="/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <link rel="stylesheet" href="/assets/bower_components/icono/dist/icono.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" /> <!-- Favicon --> <link rel="icon" href="/assets/img/favicon.ico" type="image/gif" sizes="16x16" /> <script> var base_url = '' ; </script> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous" ></script> <!-- <script src="/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="/assets/bower_components/ghosthunter/dist/jquery.ghostHunter.min.js"></script> <script src="/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="/assets/js/search.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> <!-- for Mathjax support --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } }); </script> <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous" ></script> <!-- (you can remove the below scripts but do buy me a coffee to show some support :) --> <!-- Maker widget --> <script> (function(d, h, m) { var js, fjs = d.getElementsByTagName(h)[0]; if (d.getElementById(m)) { return; } js = d.createElement(h); js.id = m; js.onload = function() { window.makerWidgetComInit({ position: "left", widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi" }); }; js.src = "https://makerwidget.com/js/embed.js"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "dhm"); </script> <!-- buy me a coffeee --> <script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="sujaykundu" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FF813F" data-position="right" data-x_margin="10" data-y_margin="10" ></script> <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]--> <!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> </head> <body> <nav class="navbar navbar-expand-lg fixed-top navbar-dark" id="topNav"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" > <span class="icono-hamburger" id="navbar-hamburger"> </span> </button> <a class="navbar-brand" href="/">MoonSeok Choi</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="/" >Home</a > </li> <li class="nav-item"> <a class="nav-link" href="/about" >About</a > </li> <li class="nav-item"> <a class="nav-link" href="/blog" >Blog</a > </li> </ul> </div> <ul class="nav justify-content-end"> <li class="nav-item"> <a class="nav-link toggle-search-button" href="#search"> <i class="fa fa-search search-icon" aria-hidden="true"></i> </a> </li> <li class="nav-item" style="margin-top:5px; padding-right:20px;" > <a class="header__checkout snipcart-checkout"> <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z" fill="#ff7901" class="header__checkout-fill"></path> </svg> <span class="snipcart-items-count"></span> <!-- <span class="snipcart-total-price"></span> --> </a> </li> <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher() " type="checkbox" name="checkbox" /> </li> </ul> </nav> <!-- Search Form --> <div class="search-form-container"> <form class="search-form"> <fieldset class="search-form__fieldset"> <div class="row"> <div class="col-lg-8 offset-md-2"> <input class="search-form__field" placeholder="Type to Search..." autofocus> <input class="search-form__submit" type="submit" value="search"> </div> </div> </fieldset> </form> <div class="row"> <div class="col-lg-8 offset-md-2 search-results"> <div class="card search-results"></div> </div> </div> <div class="close-search-button search-form-container__close"> <i class="fa fa-times icon"></i> </div> </div><div class="col-lg-12"> <div class="row" id="blog-post-container"> <div class="col-lg-8 offset-md-2"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <h1 class="post-title" itemprop="name headline">[C++] 분할구현과 메모리</h1> <h4 class="post-meta">분할구현과 메모리</h4> <p class="post-summary"> Posted by : <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name"><a href="/blog/authors/moon">moon</a></span> </span > at <time datetime="2021-05-13 03:35:23 +0000" itemprop="datePublished" >May 13, 2021</time > </p> <span class="disqus-comment-count" data-disqus-identifier="/blog/cpp/basic/memory/" ></span> <div class="post-categories"> Category : <a href="/blog/categories/cpp" >cpp</a > </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="/assets/img/posts/bitoper.PNG" alt="" /> <br /> <br /> <h2 id="메모리와-변수">메모리와 변수</h2> <ul> <li>왜 알아야하는가 <ul> <li>C++는 언어의 특정상 프로그래머가 메모리에 직접 접근이 가능하기때문에 이러한 구조를 모두 알고 프로그래밍을 해야할 필요가 있다. 그래야 제대로 된 사용이 가능하기 때문이다.</li> </ul> </li> <li>변수의 종류 <ol> <li>지역변수 <ul> <li>함수내에 선언된 변수</li> <li>데이터 영역에 존재</li> </ul> </li> <li>전역변수 <ul> <li>함수밖에 선언된 변수</li> <li>데이터 영역에 존재</li> </ul> </li> <li>정적변수(static) <ul> <li>선언방법 <ul> <li>static (자료형) (변수명)</li> </ul> </li> <li>전역변수와의 차이 <ul> <li>전역변수와 마찬가지로 데이터 영역의 존재</li> <li>정적변수는 전역변수와 달리 고정적이다.(위치가 변하지 않기 때문에 여러번 선언되도 독립적인 개체로 인식된다.)</li> <li>선언된 공간내에서 접근을 제한하기 때문에 안정적인 관리를 위해 사용된다(Singleton)</li> <li>함수 내에 선언하게 되면 초기화구문은 최초 1회만 실행된다.</li> </ul> </li> </ul> </li> <li>외부변수(extern) <ul> <li>선언방법 <ul> <li>extern (자료형) (변수명)</li> <li>선언시 초기화하면 안된다.</li> <li>값을 저장하고 싶은곳에서 초기화</li> </ul> </li> <li>다른변수들과의 차이 <ul> <li>프로그램내에서 완벽하게 공유되어 오직 하나의 값만을 갖게된다.</li> </ul> </li> </ul> </li> </ol> </li> <li>메모리 영역 <ol> <li>스택 영역 <ul> <li>호출된 함수가 종료될때까지 저장하는 영역</li> <li>함수가 호출되면 메모리 할당</li> <li>함수가 종료되면 메모리가 해제된다.(결과값은 cpu 캐시메모리에 저장)</li> </ul> </li> <li>데이터 영역 <ul> <li>전역변수중 primitive 타입이나 static타입들이 저장되는 영역</li> <li>남발하면 프로그램 메모리가 감당안될정도로 커짐</li> <li>프로그램 시작시 생성</li> <li>프로그램 종료시 해제</li> </ul> </li> <li>읽기 전용(코드, ROM) <ul> <li>프로그램을 이루는 코드나, 문자등이 모여있는 메모리 오직 읽을수만 있다.</li> </ul> </li> <li>힙 영역 <ul> <li>malloc(),new등으로 선언된 변수가 할당되는 동적메모리 공간이다.</li> <li>Instance가 소멸될때까지 계속 할당되어있다.</li> <li>cpp는 GarbageCollector가 없기 때문에 프로그래머가 하나하나 다 소멸시켜줘야한다.</li> </ul> </li> </ol> </li> </ul> <h2 id="분할구현">분할구현</h2> <ul> <li>헤더파일(.h)과 소스코드(.cpp)의 관계 <ul> <li>헤더파일은 함수나, 변수들의 선언을 정리하는 파일</li> <li>선언된 함수와 변수들은 링크단계에서 소스코드와 연결이된다.</li> <li>헤더파일 : 선언 소스파일 : 구현</li> </ul> </li> <li>헤더파일에는 왜 구현을 하지 않을까? <ul> <li>헤더파일에 구현을 하게될경우 include를 여러파일에서 할경우 재정의가 발생할수 있기 때문에</li> <li>a.cpp, b.cpp c.cpp에서 더하기 함수를 구현까지해놓은 d.h을 include하면 3파일 모두에 add가 구현되어있는 상태 (코드가 중복된다.)</li> <li>그래서 중복적인 선언으로 컴파일 에러가 발생한다.</li> <li>이러한 문제를 방지하기 위해 header file에서 구현하지 않는다.</li> </ul> </li> <li>왜 사용할까? <ul> <li>작은프로그램이라면 소스파일안에 모두 구현해도 유지보수나 가독성등이 문제가 없다</li> <li>하지만 큰 프로그램의 경우 한 파일안에 모두 작성하면 가독성이 떨어지고 유지보수 힘들다(가독성이 떨어지다보니 관계파악이힘듬)</li> <li>기능에 따라 헤더파일로 나누어 선언을하고 그에 맞게 구현을 하면 다음에 그 기능이 필요하면 헤더파일만 포함하는것으로 기능을 사용할 수 있다.</li> </ul> </li> <li>분할구현의 문제점 <ul> <li>전역변수가 무의미해짐 <ul> <li>어떤함수에서 사용하기 위해 선언해둔 전역변수를 분할하여 구성하게되면서 그 함수에 이용할 수 없게됨</li> </ul> </li> <li>헤더파일에 전역변수를 선언하면 안되나? <ul> <li>안된다. 결국 함수에서 발생하는 재정의 문제가 똑같이 발생한다.</li> </ul> </li> <li>정적변수는 안되는 이유? <ul> <li>정적은 선언영역을 해당파일에 고정되어있다는걸 알리는것이다. 즉 정적 변수 여러개를 여러파일에 선언하는것일뿐 외부에서 통합적인 변수로 사용 불가능(각각이 독립적)</li> </ul> </li> <li>해결방법 <ul> <li>extern 키워드를 이용해서 변수를 선언한다. <ul> <li>extern (자료형) (변수이름)</li> <li>선언시 절대 초기화를 하면 안된다</li> <li>나중에 따로 초기화를 진행해야한다.</li> <li>링크단계에서 extern으로 선언된 변수들을 링크시켜 외부파일에서 접근할 수 있도록 한다.</li> <li>extern은 다른파일에서 이미 이름이 같은 전역변수가 선언이 되었다는 의미. 즉, 다른 파일간의 변수를 공유하고 있다라는 뜻</li> <li>초기화 위치는 아무파일이나 상관이 없다.</li> </ul> </li> </ul> </li> </ul> </li> </ul> <br /><!-- Load Facebook SDK for JavaScript --> <div id="fb-root"></div> <script> (function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "facebook-jssdk"); </script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8" ></script> <div class="share-page"> <p class="share-text">Share this on &rarr;</p> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false" style="margin-top:5px;" >Tweet</a > <a class="fb-share-button" data-href="/blog/cpp/basic/memory/" data-size="large" data-layout="button" >Share</a> </div><!-- Author box --> <div class="card"> <div class="card-header"> About Choi MoonSeok </div> <div class="card-body"> <div class="row"> <div class="col-md-4"> <img class="author-profile-img" src="/assets/img/authors/johndoe.png" alt="Choi MoonSeok" /> </div> <div class="col-md-6"> <p class="author_bio">안녕하세요, 최문석입니다 그래픽프로그래머와 게임개발에 관심이 있습니다</p> <p>Email : moonseoktech@gmail.com</p> <p>Website : https://moonseokchoi-kr.github.io</p> <p class="profile-links"> <a class="social-link" href="https://github.com/moonseokchoi-kr" target="_blank"><i class="fab fa-github fa-fw"></i></a> </p> </div> </div> </div> </div> </div><!-- Incomment incase you want to use Disqus <div id="disqus_thread"></div> --> </article> <script> var disqus_config = function () { this.page.url = "/blog/cpp/basic/memory/"; /* Replace PAGE_URL with your page's canonical URL variable */ this.page.identifier = "/blog/cpp/basic/cpp-basic-header"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */ }; (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript></div> </div> <div class="row"> <div class="col-md-4"> <div class="card"> <div class="card-header">About moon</div> <div class="card-body"> <p class="author_bio">안녕하세요 꾸준한 개발자가 되고싶은 최문석입니다.</p><!-- Place this tag where you want the github button to render. --> <a class="github-button" href="https://github.com/sujaykundu777/devlopr-jekyll" data-color-scheme="no-preference: dark; light: dark; dark: dark;" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star sujaykundu777/devlopr-jekyll on GitHub">Star</a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Categories</div> <div class="card-body text-dark"> <div id="#cpp"></div> <li class="tag-head"> <a href="/blog/categories/cpp">cpp</a> </li> <a name="cpp"></a> <div id="#data_structure"></div> <li class="tag-head"> <a href="/blog/categories/data_structure">data_structure</a> </li> <a name="data_structure"></a> <div id="#WinAPI"></div> <li class="tag-head"> <a href="/blog/categories/WinAPI">WinAPI</a> </li> <a name="WinAPI"></a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Useful Links</div> <div class="card-body text-dark"> <li> <a href="/">Home</a> </li> <li> <a href="/about">About</a> </li> <li> <a href="/blog">Blog</a> </li> </div> </div> </div> </div> </div> <div class="col-lg-12" id="newsletter_footer"><!-- Mailchimp Newletters --> <form action=""method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> <div id="mc_embed_signup_scroll_footer"> <label for="mce-EMAIL_footer"> Signup for Weekly Email Newsletters :D</label> <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL_footer" placeholder="email address" required> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_50bab1c85eae24ecfb0f68361_3a2dd721d0" tabindex="-1" value=""> </div><br /> <div class="clear"> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe_footer" class="btn btn-lg btn-success"> </div> </div> </div><footer> <p> Powered by<a href="https://github.com/sujaykundu777/devlopr-jekyll"> devlopr jekyll</a>.Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> <script> var options = { classname: 'my-class', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="/assets/js/mode-switcher.js"></script> <script> if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); } </script> </body> </html>
